(function($){$.fn.crumina_slider=function(options){var defaults={animation:"horizontal-push",animationSpeed:1E3,bullets:true,timer:false,stop_hover:true,timer_speed:2E3,afterSlideChange:function(){}};var options=$.extend(defaults,options);return this.each(function(){var activeSlide=0,numberSlides=0,orbitWidth,orbitHeight,locked;var crumina_class=$(this).addClass("orbit"),cruminaWrapper=crumina_class.wrap('<div class="orbit-wrapper" />').parent();crumina_class.add(orbitWidth).width("1px");var slides=
    crumina_class.children("div.crumina-slides");slides.each(function(){var _slide=$(this),_slideWidth=_slide.find("div.item").width(),_slideHeight=_slide.find("div.item").height();if(_slideWidth<=crumina_class.width()){crumina_class.add(cruminaWrapper).width(_slideWidth);orbitWidth=crumina_class.width()}if(_slideHeight<=crumina_class.height())orbitHeight=crumina_class.height();numberSlides++});function unlock(){locked=false}function lock(){locked=true}if(slides.length==1){options.bullets=false;options.timer=
    false}slides.eq(activeSlide).css({"z-index":3}).fadeIn(function(){slides.css({"display":"block"})});if(numberSlides>1&&options.animation=="horizontal-push")for(var i_slide=1;i_slide<numberSlides;i_slide++)slides.eq(i_slide).css({"z-index":3,"left":orbitWidth});function run_timer(){if(!options.timer||options.timer=="false")return false;else{timerRunning=true;slider_timer_interval=setInterval(function(e){shift("next")},options.timer_speed)}}function stop_timer(){if(!options.timer||options.timer=="false")return false;
else{timerRunning=false;clearInterval(slider_timer_interval)}}if(options.timer){var timerRunning;run_timer()}if(options.stop_hover)cruminaWrapper.mouseenter(function(){stop_timer()}).mouseleave(function(){if(!timerRunning)run_timer()});if(options.bullets){var bulletHTML='<div class="slider-nav"></div>';cruminaWrapper.append(bulletHTML);var bullets=cruminaWrapper.children("div.slider-nav");for(i=0;i<numberSlides;i++){var liMarkup=$("<a></a>");cruminaWrapper.children("div.slider-nav").append(liMarkup);
    liMarkup.data("index",i);liMarkup.click(function(){shift($(this).data("index"))})}setActiveBullet()}function setActiveBullet(){if(!options.bullets)return false;else bullets.children("a").removeClass("active").eq(activeSlide).addClass("active")}function shift(direction){var prevActiveSlide=activeSlide,slideDirection=direction;if(prevActiveSlide==slideDirection)return false;function resetAndUnlock(){slides.eq(prevActiveSlide).css({"z-index":1});unlock();options.afterSlideChange.call(this)}if(slides.length==
    "1")return false;if(!locked){lock();if(direction=="next"){activeSlide++;if(activeSlide==numberSlides)activeSlide=0}else if(direction=="prev"){activeSlide--;if(activeSlide<0)activeSlide=numberSlides-1}else{activeSlide=direction;if(prevActiveSlide<activeSlide)slideDirection="next";else if(prevActiveSlide>activeSlide)slideDirection="prev"}setActiveBullet();slides.eq(prevActiveSlide).css({"z-index":2});if(options.animation=="fade")slides.eq(activeSlide).css({"opacity":0,"z-index":3}).animate({"opacity":1},
    options.animationSpeed,resetAndUnlock);if(options.animation=="horizontal-slide"){if(slideDirection=="next")slides.eq(activeSlide).css({"left":orbitWidth,"z-index":3}).animate({"left":0},options.animationSpeed,resetAndUnlock);if(slideDirection=="prev")slides.eq(activeSlide).css({"left":-orbitWidth,"z-index":3}).animate({"left":0},options.animationSpeed,resetAndUnlock)}if(options.animation=="horizontal-push"){if(slideDirection=="next"){slides.eq(activeSlide).css({"left":orbitWidth,"z-index":3}).animate({"left":0},
    options.animationSpeed,resetAndUnlock);slides.eq(prevActiveSlide).animate({"left":-orbitWidth},options.animationSpeed)}if(slideDirection=="prev"){slides.eq(activeSlide).css({"left":-orbitWidth,"z-index":3}).animate({"left":0},options.animationSpeed,resetAndUnlock);slides.eq(prevActiveSlide).animate({"left":orbitWidth},options.animationSpeed)}}}}})}})(jQuery);
